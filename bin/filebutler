#!/usr/bin/env python

import string
import sys

import filebutler.GnuFindOut
import filebutler.Localtime

def nothing():
    filelist = []
    totalSize = 0
    count = 0

    with open(sys.argv[1]) as f:
        for line in f:
            fields = string.split(line)
            size = int(fields[6].strip())
            name = fields[10]
            filelist.append({'size': size, 'name': name})
            totalSize += size
            count += 1
        print "%d files, total size %d" % (count, totalSize)

        mysize = 0
        for f in filelist:
            mysize += f['size']
        print "mytotal %d" % mysize

def main():
    print "main"
    g = filebutler.GnuFindOut("/home/guestsi/junk/some-scratch-files",
                              lambda p: os.path.join("/home/guestsi", p))
    print("all files")
    for f in g.all():
        print f

    f1 = filebutler.Filter(owner="laugrauda")
    print("owner files")
    for spec in g.filter(f1):
        print spec

    f2 = filebutler.Filter(owner="laugrauda", sizeGeq=197)
    print("large owner files")
    for spec in g.filter(f2):
        print spec

    localtime = filebutler.Localtime()
    f3 = filebutler.Filter(mtimeBefore=localtime.t(2015, 1, 1))
    print("mtime files")
    for spec in g.filter(f3):
        print spec

if __name__ == '__main__':
    main()
